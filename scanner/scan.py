import os
import yara

def compile_yara_rules(directory):
	direct = os.listdir(directory)
	yara_dict ={}
	for yar in direct:
		try:
			#Try to compile individual rules for correctness
			test = yara.compile(filepath=directory+yar)
			yara_dict[yar] = directory+yar
		except:
			continue
	rules = yara.compile(sources=yara_dict)
	rules.save('rules/yara_rules')
	return None


#Scan from directory root
def scan_directory_struct(root, exclude_paths, yara_rules_file):
	rules = yara.load(yara_rules_file)
	dir_root = os.listdir(root)
	for d in dir_root:

